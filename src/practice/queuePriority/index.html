<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>微队列、交互队列、网络队列、延时队列优先级</title>
  </head>

  <body>
    <button id="begin">开始</button>
    <button id="aaa">按钮</button>
    <script>
      function delay() {
        var now = new Date()
        while (new Date() - now < 3000) {}
      }

      // 微队列
      function promise() {
        console.log("add promise")
        Promise.resolve().then(function () {
          console.log("promise end")
        })
      }

      // 延时队列
      function timer() {
        console.log("add timer")
        setTimeout(function () {
          console.log("timer end")
        }, 100)
      }

      // 交互队列
      function event() {
        console.log("add event")
        aaa.onclick = function () {
          console.log("event end")
        }
      }

      // 网络队列
      function getFetch() {
        console.log("add fetch")
        fetch("./a.json").then(function (res) {
          console.log("res end")
        })
      }

      begin.onclick = function () {
        promise()
        timer()
        event()
        getFetch()
        console.log("===========")
        delay()

        // add promise
        // add timer
        // add event
        // add fetch
        // ===========
        // promise end
        // event end
        // res end
        // timer end
      }
    </script>
  </body>
</html>
