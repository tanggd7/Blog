## CSS Reset
[css reset 推荐重置](https://juejin.cn/post/7086280551446888462?searchId=2023092509283546B3E7D408B490968237)

## 属性值的计算过程

1. 确定声明值：参考样式表中没有冲突的声明，直接作为 css 属性值。
2. 层叠冲突：对样式表有冲突的声明使用层叠规则，确定 css 属性值。
   1. 比较重要性：页面作者样式 > 用户样式 > 用户代理样式
   2. 比较优先级：比较权重
   3. 比较源次序
3. 使用继承：对仍然没有值的属性，若可以继承，则继承父元素的值
4. 使用默认值：对仍然没有值的属性，使用默认值

特殊的两个 css 取值：

- inherit：手动（强制）继承，将父元素的值取出应用到该元素
- initial：初始值，将该属性设置为默认值
#### CSS 权重
CSS 选择器权重通常由四个部分组成，它们的权重从高到低依次是：

1. 内联样式：通过在 HTML 元素的 style 属性中直接定义样式，例如 <div style="color: red;">。内联样式的权重为 1000。
2. ID 选择器：使用 ID 选择器来选择元素，例如 #my-element。ID 选择器的权重为 100。
3. 类选择器、属性选择器和伪类选择器：包括类选择器（如 .my-class）、属性选择器（如 [type="text"]）和伪类选择器（如 :hover）。这些选择器的权重为 10。
4. 元素选择器和伪元素选择器：包括元素选择器（如 div）和伪元素选择器（如 ::before）。元素选择器的权重为 1。

需要注意的是，当多个选择器具有相同的权重时，最后定义的规则将覆盖之前的规则。如果两个规则的权重相同但指向同一元素，则后定义的规则将覆盖先定义的规则。

## 盒模型

- 块盒，独占一行，能设置各边和内边距
- 行盒，宽高设置是无效的，切 margin、padding、border 横向有效，但是纵向只有视觉上的效果，并不会改变行盒的位置

```css
// 修改盒模型
box-sizing: border-box; // 设置宽高包含了边框盒内边距
box-sizing: content-box; // 宽高只包含内容
```

## 视觉格式化模型
大体上将页面中的盒子的排列分为三种方式：常规流、浮动、定位

### 常规流
块盒独占一行，行盒水平依次排列

包含块（containing block）：每个盒子都有它的包含块，包含块决定了盒子的排列区域。
绝大部分情况下，盒子的包含块，为其父元素的内容盒。
#### 块盒
##### 每个块盒的总高度，必须刚好等于包含块的宽度
width 的默认值是 **auto** ，将剩余空间吸收掉
margin 的默认值是 **0** ，也可以设置为 **auto**
width 吸收能力强于 margin
若宽度、边框、内边距、外边距计算后，仍然有剩余空间，该空间被 **margin-right** 全部吸收
在常规流中，块盒在其包含块中居中，可以定宽，然后左右 **margin** 为 **auto**
当 width 设置为 auto，margin 设置为负数，那么块盒会超出包含块，向两边延伸，因为 width 已经吸收了剩余宽度
##### 每个块盒垂直方向上的 auto 值
height: auto ，适应内容的高度
margin: auto，表示 0
##### 百分比取值
padding、width、margin 可以是百分比
以上的所有百分比都相对于包含块的 **宽度**
高度的百分比：包含块的高度是否取决于子元素的高度，设置百分比无效，（包含块没有设置高度，子元素设置了高度）
##### 上下外边距合并
像个常规流块盒，上下边距相邻，会进行合并，两个值取最大值，不光兄弟元素，父子元素也会合并。

### 浮动
float 属性值：

- left：左浮动，元素靠上靠左
- right：右浮动，元素靠上靠右
- 默认为 none
#### 宽高 & 排列

1. 当一个元素浮动后，元素必定为块盒，更改 display 为 block
2. 浮动元素的包含块，和常规流一样，为父元素的内容盒
3. 浮动元素的宽度设置为 auto 时，适应内容宽度（不吸收剩余空间）
4. 浮动元素的高度设置为 auto 时，适应内容高度，和常规流一样
5. margin 为 auto，margin 为 0
6. 边框、内边距百分比设置与常规流一样
7. 浮动元素排列时，会避开前面的常规流块盒
8. 常规流块盒在排列时，无视前面的浮动盒子
9. 行盒在排列时，会避开浮动盒子。**如果文字没有在行盒中，浏览器会自动生成一个行盒包裹文字，该行盒叫做“匿名行盒”（文字环绕）**
10. 外边距合并不会发生

![image.png](https://cdn.nlark.com/yuque/0/2023/png/165570/1695626688167-a91cc03b-3ed9-423f-9fb0-398847b69482.png#averageHue=%239abecd&clientId=ub4c5d033-f8ce-4&from=paste&height=185&id=u0e45a5d2&originHeight=580&originWidth=1498&originalType=binary&ratio=2&rotation=0&showTitle=false&size=168405&status=done&style=none&taskId=u84e6ad5d-30e2-4678-9090-ac049a25e85&title=&width=478)

#### 高度坍塌
高度坍塌根源：常规流盒子的自动高度，在计算时，不会考虑浮动盒子。
清除浮动，clear

- 默认 none
- left：清除左浮动，该元素必须出现在前面所有左浮动盒子的下方
- right：清除右浮动，该元素必须出现在前面所有右浮动盒子的下方
- both：清除左右浮动，该元素必须出现在前面所有浮动盒子的下方
#### 盒子位置

- 左浮动的盒子向上向左排列
- 右浮动的盒子向上向右排列
- 浮动盒子的顶边**不得高于**上一个盒子的顶边
- 若剩余空间无法放下浮动的盒子，则该盒子向下移动，知道具备足够的空间能容纳盒子，然后再向左或向右移动

![image.png](https://cdn.nlark.com/yuque/0/2023/png/165570/1695777216551-beb2ced9-f77c-4222-825e-c17214dfa3b7.png#averageHue=%23f0ab82&clientId=u64ff77f1-c4ae-4&from=paste&height=376&id=u69b44dd0&originHeight=1192&originWidth=1720&originalType=binary&ratio=2&rotation=0&showTitle=false&size=206246&status=done&style=none&taskId=u42689289-1751-4f6e-aa4a-65f91c93273&title=&width=542)
### 定位
手动控制元素在包含块中的精准位置
一个元素，只要 position 的取值不是 static，认为该元素是一个定位元素。
定位元素会脱离文档流（相对定位除外）

绝对定位、固定定位一定为块盒。
绝对定位、固定定位一定不是浮动。
没有外边距合并

position 为 absolute 时，包含块，找祖先元素中的定位元素（position ≠ static）的填充盒。如果祖先元素都没有设置 position，那么它的包含块就是整个网页（初始化包含块）。
position 为 fixed 时，包含块，为整个视口。和 position 的初始化包含块不同的是，视口在网页的可见区域。

只有定位元素设置 z-index 有效
z-index 如果为负数，常规元素、浮动元素会可以覆盖它
## 进阶
### iframe
可替换元素
```html
<a href="www.baidu.com" target="myIframe">百度</a>
<iframe name="myIframe"></iframe>
```
### @规则
```css
/* 导入其他 css */
@import "reset.css"
/* 使用的字符编码集 utf-8，必须写在第一行 */
@charset "utf-8" css
```
### web字体和图标
```css
@font-face {
  font-family: "自定义字体名称";
  src: url("./.../font.ttf");
}
```
### 块级格式化上下文 BFC
它是一块**独立**的**渲染区域**，它规定了在该区域中，**常规流块盒**的布局。

- 常规流块盒在水平方向上，必须撑满包含块
- 常规流块盒在包含块的垂直方向上依次摆放
- 常规流块盒若外边距无缝相邻，则进行外边距合并
- 常规流块盒的自动高度和摆放位置，无视浮动元素

以下元素会在内部创建 BFC 区域：

- 根元素 <html> 元素创建的 BFC 区域，覆盖了网页中所有的元素
- 浮动元素和绝对定位元素
- overflow 不等于 visible 的块盒

![image.png](https://cdn.nlark.com/yuque/0/2023/png/165570/1695715633914-30bd4078-d8ba-43ea-89a3-8563fee6293a.png#averageHue=%23919780&clientId=u64ff77f1-c4ae-4&from=paste&height=636&id=u21853fd6&originHeight=1272&originWidth=2654&originalType=binary&ratio=2&rotation=0&showTitle=false&size=712657&status=done&style=none&taskId=u621edd88-73aa-4c9a-99eb-354414e1e87&title=&width=1327)
不同的 BFC 区域，它们进行渲染是互不干扰
创建 BFC 的元素，隔绝了它内部和外部的联系，内部的渲染不会影响到外部
#### 具体规则
##### 创建 BFC 的元素，它的自动高度需要计算浮动元素
之前浮动的高度坍塌使用清除浮动可以解决，现在也可以通过设置父元素为 BFC 来解决。
##### 创建 BFC 的元素，它的边框盒不会与浮动元素重叠
当两个兄弟元素，其中有一个是浮动元素的时候，另外一个元素会无视它。
把元素设置为 BFC 后，元素就会看到浮动元素，并避开，但是此时设置 margin-left 就没用了，但是可以设置浮动元素的 margin-right 。
##### 创建 BFC 的元素，不会和它的子元素进行外边距合并
当两个父子元素，外边距中间没有任何东西分开时，外边距会合并。
把父元素设置为 BFC 后，外边距就不会合并了。
### 堆叠上下文 z-index
创建堆叠上下文的元素

- html 元素（根元素）
- 设置 z-index（非 z-index: auto）数值的**定位元素**

同一个堆叠上下文中元素在 z 轴上的排列
从 **后 **到 **前 **的排列顺序

1. 创建堆叠上下文的元素的背景和边框
2. 堆叠级别为负值的堆叠上下文
3. 常规流非定位的块盒
4. 非定位的浮动盒子
5. 常规流非定位行盒
6. 任何 z-index 是 auto 的定位子元素，以及 z-index 是 0 的堆叠上下文
7. 堆叠级别为正值的堆叠上下文
## 知识点

- **pre** 标签可以避免空白折叠，内部是使用了 **white-space: pre** 这个 css 属性
- 空白折叠，发生在 **行盒内部** 或 **行盒之间** ，包括 **行块盒** ，就是元素之间有空隙，在书写代码的时候，代码会换行，中间的空格就折叠了，如果想没有空隙，代码就需要连在一起
- 图片的下方也会有白边，发生在图片的父元素是一个块盒，块盒高度自动。字体越大，白边越大。图片的基线位置是下外边距。
   - 所以可以设置父元素 font-size 为 0
   - 将图片设置为块盒
- 当两个 **行盒** 或者 **行块盒** 要保持垂直居中，可以使用 **vertical-align，**可以设置预设值、数值
- 当元素内部出现行盒，那么元素内部会自动生层一个基线。
- 默认情况背景覆盖边框盒，可以通过 **background-clip** 进行修改
- **可替换元素** 类似于行块盒， image、audio、video、iframe，可以设置宽高等，还可以设置 **object-fit** 来控制图片的适应方式
- **display: none** 不生成盒子。**visibility: hidden** 生成盒子但是不展示，只是视觉上移除盒子，盒子仍然占据空间。
- 背景图，img 元素是属于 HTML 概念，背景图属于 css 的概念
   - 当图片属于网页内容时，必须使用 img 元素
   - 当图片仅用于美化页面时，必须使用背景图
- line-height，数字、em、% 都是基于字体大小
   - em、% 是先计算再继承，所以如果设置再父元素上时，会先依据父元素的字体计算，然后再继承给子元素
   - 数字，是先继承再计算，所以常用的是纯数字的方式
- body 背景，是一块画布区域，这个区域的特点是，最小宽度为视口宽度，最小高度为视口高度
   - HTML 元素的背景，覆盖画布
   - BODY 元素的背景
      - 如果 html 元素有背景，body 元素正常（背景覆盖边框盒）
      - 如果 html 元素没有背景，body 元素的背景覆盖画布
   - 画布的背景图
      - 背景图的宽度百分比，相对于视口
      - 背景图的高度百分比，相对于网页高度
      - 背景图的横向位置百分比、预设值，相对于视口
      - 背景图的纵向位置百分比、预设值，相对于网页高度
